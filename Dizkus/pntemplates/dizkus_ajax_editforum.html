<!--[*  $Id$  *]-->
<!--[cssversion assign='configclass']-->

<form class="<!--[$configclass]-->" id="editforumform_<!--[$forum.forum_id]-->" name="editforumform_<!--[$forum.forum_id]-->" action="<!--[pnmodurl modname='Dizkus type='admin' func='forum']-->" method="post">
    <fieldset>
        <!--[if $newforum eq true]-->
        <legend><!--[gt text="Add a Forum"]--></legend>
        <!--[else]-->
        <legend><!--[gt text="Edit a Forum"]--></legend>
        <!--[/if]-->

        <div class="<!--[$configclass]-->row">
            <label for="forum_name"><!--[gt text="Forum"]--></label>
            <input type="text" id="forum_name" name="forum_name" size="70" maxlength="150" value="<!--[$forum.forum_name|pnvarprepfordisplay]-->" />
        </div>

        <!--[if $newforum neq true]-->
        <div class="<!--[$configclass]-->row">
            <label for="forum_info"><!--[gt text="Forum Info"]--></label>
            <span id="forum_info">
                <!--[boardstats type='forumtopics' id=$forum.forum_id assign=topiccount]-->
                <!--[boardstats type='forumposts' id=$forum.forum_id assign=postcount]-->
                <a title="<!--[gt text="Visit this forum"]-->" href="<!--[pnmodurl modname='Dizkus' type='user' func='viewforum forum=$forum.forum_id]-->">
                    <!--[$topiccount]-->&nbsp;<!--[if $topiccount eq 1]--><!--[gt text="Topic"]--><!--[else]--><!--[gt text="Topics"]--><!--[/if]-->&nbsp;/&nbsp;
                    <!--[$postcount]-->&nbsp;<!--[if $postcount eq 1]--><!--[gt text="post"]--><!--[else]--><!--[gt text="Posts"]--><!--[/if]-->
                </a>
            </span>
        </div>
        <!--[/if]-->

        <div class="<!--[$configclass]-->row">
            <label for="forum_desc"><!--[gt text="Description"]--></label>
            <textarea id="forum_desc" class="dzk_texpand" name="desc"><!--[$forum.forum_desc|pnvarprephtmldisplay]--></textarea>
        </div>

        <div class="<!--[$configclass]-->row">
            <label for="modulref"><!--[gt text="Modulereference"]--></label>
            <select id="moduleref" name="moduleref" size="1">
                <!--[foreach item='hookmod' from=$hooked_modules]-->
                <option value="<!--[$hookmod.id]-->" <!--[if $hookmod.sel == true]-->selected="selected"<!--[/if]-->><!--[$hookmod.name]--></option>
                <!--[foreachelse]-->
                <option value="0" selected="selected"><!--[gt text="no hooked module found"]--></option>
                <!--[/foreach]-->
            </select>
            <p class="zk-formnote pn-sub"><!--[gt text="Used for comment feature, all topics to submission in this module go into this forum. This list only contains the modules where the Dizkus hooks are activated for."]--></p>
        </div>

        <div class="<!--[$configclass]-->row">
            <label for="pncategory"><!--[gt text="Select Category"]--></label>
            <!--[$categoryselector]-->
        </div>

        <div class="<!--[$configclass]-->row">
            <label for="forum_mods"><!--[gt text="Moderator"]--></label>
            <span id="forum_mods" class="zk-formnote">
                <strong><!--[gt text="current"]-->:</strong><br />
                <!--[foreach item='mod' from=$moderators]-->
                <!--[$mod.uname|pnvarprepfordisplay]-->&nbsp;<!--[if $mod.uid > 1000000]-->(<!--[gt text="Group"]-->)<!--[/if]-->&nbsp;(<input type="checkbox" name="rem_mods[]" value="<!--[$mod.uid]-->" />&nbsp;<!--[gt text="remove"]-->)<br />
                <!--[foreachelse]-->
                <!--[gt text="no moderator assigned"]--><br /><br />
                <!--[/foreach]-->
                <strong><!--[gt text="Add"]-->:</strong><br />
                <select id="mods" name="mods[]" size="10" multiple="multiple">
                    <option value="0"><!--[gt text="none"]--></option>
                    <!--[foreach item='group' from=$groups]-->
                    <option value="<!--[$group.gid]-->"><!--[$group.name|pnvarprepfordisplay]--> (<!--[gt text="Group"]-->)</option>
                    <!--[/foreach]-->
                    <!--[foreach item='user' from=$users]-->
                    <option value="<!--[$user.uid]-->"><!--[$user.uname|pnvarprepfordisplay]--></option>
                    <!--[/foreach]-->
                </select>
            </span>
        </div>

        <div id="extsource" class="<!--[$configclass]-->row">
            <label for="pop3_active"><!--[gt text="External source"]--></label>
            <!--[foreach item='extsource' from=$externalsourceoptions key='num']-->
            <div class="zk-formlist">
                <input id="<!--[$num]-->_<!--[$forum.forum_id]-->" onchange="javascript:showextendedoptions(<!--[$num]-->, <!--[$forum.forum_id]-->)" type="radio" name="extsource" value="<!--[$num]-->" <!--[$extsource.checked]--> />
                <label for="<!--[$num]-->_<!--[$forum.forum_id]-->"><!--[$extsource.name]--></label>&nbsp;<!--[$extsource.ok]-->
            </div>
            <!--[/foreach]-->
        </div>
    </fieldset>

    <fieldset id="pnlogindata_<!--[$forum.forum_id]-->" <!--[if $forum.externalsource == 0]-->style="display:none;"<!--[/if]-->>
        <div class="<!--[$configclass]-->row">
            <label for="pnuser"><!--[gt text="Zikula username"]--></label>
            <input type="text" id="pnuser" name="pnuser" maxlength="60" size="30"  value="<!--[$forum.pop3_pnuser]-->" />
        </div>
        <div class="<!--[$configclass]-->row">
            <label for="pnpassword"><!--[gt text="Zikula password"]--></label>
            <input type="password" id="pnpassword" name="pnpassword" maxlength="60" size="30"  value="<!--[$forum.pop3_pnpassword]-->" />
        </div>
        <div class="<!--[$configclass]-->row">
            <label for="pnpasswordconfirm"><!--[gt text="Zikula password confirmation"]--></label>
            <input type="password" id="pnpasswordconfirm" name="pnpasswordconfirm" maxlength="60" size="30"  value="<!--[$forum.pop3_pnpassword]-->" />
        </div>
    </fieldset>

    <fieldset id="mail2forum_<!--[$forum.forum_id]-->" <!--[if $forum.externalsource <> 1]-->style="display:none;"<!--[/if]-->>
        <legend><!--[gt text="Mail2Forum"]--></legend>
        <div class="<!--[$configclass]-->row">
            <label for="pop3_test"><!--[gt text="Perform Pop3 test after saving"]--></label>
            <input type="checkbox" id="pop3_test" name="pop3_test" value="1" />
        </div>
        <div class="<!--[$configclass]-->row">
            <label for="pop3_server"><!--[gt text="Pop3 Server"]--></label>
            <input type="text" id="pop3_server" name="pop3_server" maxlength="60" size="30" value="<!--[$forum.pop3_server]-->" /><br />
        </div>
        <div class="<!--[$configclass]-->row">
            <label for="pop3_port"><!--[gt text="Pop3 port"]--></label>
            <input type="text" id="pop3_port" name="pop3_port" maxlength="5" size="5" value="<!--[$forum.pop3_port]-->" />
        </div>
        <div class="<!--[$configclass]-->row">
            <label for="pop3_login"><!--[gt text="Pop3 login"]--></label>
            <input type="text" id="pop3_login" name="pop3_login" maxlength="60" size="30"  value="<!--[$forum.pop3_login]-->" />
        </div>
        <div class="<!--[$configclass]-->row">
            <label for="pop3_password"><!--[gt text="Pop3 password"]--></label>
            <input type="password" id="pop3_password" name="pop3_password" maxlength="60" size="30"  value="<!--[$forum.pop3_password]-->" />
        </div>
        <div class="<!--[$configclass]-->row">
            <label for="pop3_passwordconfirm"><!--[gt text="Pop3 password confirmation"]--></label>
            <input type="password" id="pop3_passwordconfirm" name="pop3_passwordconfirm" maxlength="60" size="30"  value="<!--[$forum.pop3_password]-->" />
        </div>
        <div class="<!--[$configclass]-->row">
            <label for="pop3_matchstring"><!--[gt text="Rule"]--></label>
            <input type="text" id="pop3_matchstring" name="pop3_matchstring" maxlength="255" size="30"  value="<!--[$forum.pop3_matchstring]-->" />
            <p class="zk-formnote pn-sub"><!--[gt text="The rule is a regular expression that the mails subject as to match to avoid spa posigns. An empty rule means no checks!"]--></p>
        </div>
    </fieldset>

    <fieldset id="rss2forum_<!--[$forum.forum_id]-->" <!--[if $forum.externalsource <> 2]-->style="display:none;"<!--[/if]-->>
        <legend><!--[gt text="RSS2Forum"]--></legend>
        <div class="<!--[$configclass]-->row">
            <label for="rssfeed"><!--[gt text="Select RSS feed"]--></label>
            <select name="rssfeed" size="1">
                <option value="0"><!--[gt text="none"]--></option>
                <!--[foreach item='feed from=$rssfeeds]-->
                <option value="<!--[$feed.fid]-->" <!--[if $feed.fid == $forum.externalsourceurl]-->selected="selected"<!--[/if]-->><!--[$feed.feedname|pnvarprepfordisplay]--> (<!--[$feed.url]-->)</option>
                <!--[/foreach]-->
            </select>
        </div>
    </fieldset>

    <!--[if $newforum eq true]-->
    <input type="hidden" name="add" value="add" checked="checked" />
    <!--[else]-->
    <fieldset>
        <legend><!--[gt text="Delete"]--></legend>
        <div class="<!--[$configclass]-->row">
            <label for="delete_<!--[$forum.forum_id]-->"><!--[gt text="Delete"]--></label>
            <input type="checkbox" id="delete_<!--[$forum.forum_id]-->" name="delete" value="delete" />
        </div>
    </fieldset>
    <!--[/if]-->

    <div class="<!--[$configclass]-->buttons">
        <input type="hidden" name="authid" value="<!--[insert name='generateauthkey' module='Dizkus']-->" />
        <input type="hidden" name="forum_id" value="<!--[$forum.forum_id]-->" />
        <input type="hidden" name="cat_id" value="<!--[$forum.cat_id]-->" />
        <button class="dzk_img ok" onclick="javascript:storeforum(<!--[$forum.forum_id]-->); return false;" name="submit" type="submit"><!--[gt text="Save"]--></button>
    </div>

</form>

