<!--[*  $Id$  *]-->
<!--[gt text="Edit forum tree" assign=templatetitle]-->
<!--[pnimg src='icon_dbaccess.gif' assign='progressicon']-->
<!--[include file='dizkus_admin_header.html']-->

<p class="z-informationmsg"><!--[gt text="Notice: In this page, you can create, edit and delete forum categories and forums. Also, you can  use drag and drop to arrange the order of forums and forum categories within the forum tree (your changes will be saved when you click on the 'Save tree order' button)."]--></p>

<div class="z-clearfix" style="margin-top: 1em;">
    <button onclick="javascript:addcategory();" class="dzk_img add dzk_float_left"><!--[gt text="Create new forum category"]--></button>
    <button onclick="javascript:storetreeorder();" class="dzk_img ok dzk_float_right" type="submit"><!--[gt text="Save tree order"]--></button>
</div>

<div id="dizkusinformation" style="visibility: hidden;">&nbsp;</div>

<ul id="category">
    <!--[foreach item='category' from=$categorytree]-->
    <li id="category_<!--[$category.cat_id]-->" class="catline">
        <div class="z-clearfix">
            <div class="dzk_handle z-clearfix">
                <div id="categorytitle_<!--[$category.cat_id]-->" style="float: left; width: 60%;">
                    <a title="<!--[gt text="Visit this forum category"]-->" href="<!--[pnmodurl modname=Dizkus type=user func=main viewcat=$category.cat_id]-->"><!--[$category.cat_title]--></a> (<!--[$category.cat_id]-->)
                </div>
                <div style="float: right; width: 30%; text-align: right; padding-right: 1em;">
                    <button id="loadcategory_<!--[$category.cat_id]-->" title="<!--[gt text="Load category data"]-->" onclick="javascript:loadcategory(<!--[$category.cat_id]-->);"><!--[pnimg modname='Dizkus' src="icon_show.gif" __alt="Load category data" ]--></button>
                    <button id="hidecategory_<!--[$category.cat_id]-->" style="display: none;" title="<!--[gt text="Hide category"]-->"><!--[pnimg modname='Dizkus' src="icon_hide.gif"]--></button>
                    <button id="showcategory_<!--[$category.cat_id]-->" style="display: none;" title="<!--[gt text="Show category"]-->"><!--[pnimg modname='Dizkus' src="icon_show.gif"]--></button>
                    <button onclick="javascript:hideshowforumlist(<!--[$category.cat_id]-->);" id="hideforumlist_<!--[$category.cat_id]-->" style="display: none;" title="<!--[gt text="Hide forums"]-->"><!--[pnimg modname='Dizkus' src="icon_hideforums.gif"]--></button>
                    <button onclick="javascript:hideshowforumlist(<!--[$category.cat_id]-->);" id="showforumlist_<!--[$category.cat_id]-->" title="<!--[gt text="Show forums"]-->"><!--[pnimg modname='Dizkus' src="icon_showforums.gif"]--></button>
                    <button onclick="javascript:addforum(<!--[$category.cat_id]-->);" id="addforum_<!--[$category.cat_id]-->" title="<!--[gt text="Create forum"]-->"><!--[pnimg modname='Dizkus' src="icon_addforum.gif" __alt="Create new forum" ]--></button>
                    <img id="progresscategoryimage_<!--[$category.cat_id]-->" style="visibility: hidden;" src="<!--[$progressicon.src]-->" width="<!--[$progressicon.width]-->" height="<!--[$progressicon.height]-->" alt="<!--[gt text="Working. Please wait..."]-->" />
                </div>
            </div>
            <div id="editcategory_<!--[$category.cat_id]-->" style="display: none; margin: 0 1em;">&nbsp;</div>
        </div>
        <ul id="cid_<!--[$category.cat_id]-->" class="dzk_treeforumlist" style="display: none;">
            <!--[foreach item='forum' from=$category.forums]-->
            <li id="forum_<!--[$forum.forum_id]-->" class="forumline">
                <div class="dzk_handle z-clearfix">
                    <div id="forumtitle_<!--[$forum.forum_id]-->" style="float: left; width: 60%;">
                        <a href="<!--[pnmodurl modname=Dizkus type=user func=viewforum forum=$forum.forum_id]-->" title="<!--[$forum.forum_name|pnvarprepfordisplay]-->"><!--[$forum.forum_name|pnvarprepfordisplay]--></a> (<!--[$forum.forum_id]-->)
                    </div>
                    <div style="float: right; width: 30%; text-align: right; padding-right: 1em;">
                        <button id="loadforum_<!--[$forum.forum_id]-->"  title="<!--[gt text="Load forum data"]-->" onclick="javascript:loadforum(<!--[$forum.forum_id]-->);"><!--[pnimg modname='Dizkus' src="icon_show.gif" __alt="Load forum data" ]--></button>
                        <button id="hideforum_<!--[$forum.forum_id]-->" style="display: none;" title="<!--[gt text="Hide forum"]-->"><!--[pnimg modname='Dizkus' src="icon_hide.gif"]--></button>
                        <button id="showforum_<!--[$forum.forum_id]-->" style="display: none;" title="<!--[gt text="Show forum"]-->"><!--[pnimg modname='Dizkus' src="icon_show.gif"]--></button>
                        <img id="progressforumimage_<!--[$forum.forum_id]-->" style="visibility: hidden;" src="<!--[$progressicon.src]-->" width="<!--[$progressicon.width]-->" height="<!--[$progressicon.height]-->" alt="<!--[gt text="Working. Please wait..."]-->" />
                    </div>
                </div>
                <div id="editforum_<!--[$forum.forum_id]-->" style="display: none; margin: 0 1em;">&nbsp;</div>
            </li>
            <!--[/foreach]-->
            <li id="emptycategory_<!--[$category.cat_id]-->" class="z-informationmsg" style="<!--[if $category.forums|@count <> 0]-->display: none; <!--[/if]-->">
                <!--[gt text="This forum category does not yet contain any forums."]-->
            </li>
            <li id="newforum_cat<!--[$category.cat_id]-->" class="forumline" style="display: none;">
                <div class="dzk_handle z-clearfix">
                    <div id="forumtitle_cat<!--[$category.cat_id]-->" style="float: left; width: 60%;">
                        <!--[gt text="-- Create new forum --"]-->
                    </div>
                    <div style="float: right; width: 30%; text-align: right; padding-right: 1em;">
                        <button id="hideforum_cat<!--[$category.cat_id]-->" style="display: none;" title="<!--[gt text="Hide forum"]-->"><!--[pnimg modname='Dizkus' src="icon_hide.gif"]--></button>
                        <button id="showforum_cat<!--[$category.cat_id]-->" style="display: none;" title="<!--[gt text="Show forum"]-->"><!--[pnimg modname='Dizkus' src="icon_show.gif"]--></button>
                        <button id="canceladdforum_cat<!--[$category.cat_id]-->" title="<!--[gt text="Cancel"]-->"><!--[pnimg modname='Dizkus' src="icon_canceladdforum.gif" __alt="Cancel" ]--></button>
                        <img id="progressforumimage_cat<!--[$category.cat_id]-->" style="visibility: hidden;" src="<!--[$progressicon.src]-->" width="<!--[$progressicon.width]-->" height="<!--[$progressicon.height]-->" alt="<!--[gt text="Working. Please wait..."]-->" />
                    </div>
                </div>
                <div id="neweditforum_<!--[$category.cat_id]-->" style="display: none; margin: 0 1em;">&nbsp;</div>
            </li>
        </ul>
    </li>

    <!--[/foreach]-->

    <li style="display: none;" class="catline" id="newcategory">
        <div class="z-clearfix">
            <div class="dzk_handle z-clearfix">
                <div id="newcategorytitle" style="float: left; width: 60%;">
                    <!--[gt text="-- Create new forum category --"]-->
                </div>
                <div style="float: right; width: 30%; text-align: right; padding-right: 1em;">
                    <button id="newhidecategory"  style="display: none;" title="<!--[gt text="Hide category"]-->"><!--[pnimg modname='Dizkus' src="icon_hide.gif"]--></button>
                    <button id="newshowcategory"  style="display: none;" title="<!--[gt text="Show category"]-->"><!--[pnimg modname='Dizkus' src="icon_show.gif"]--></button>
                    <button id="newhideforumlist" style="display: none;" title="<!--[gt text="Hide forums"]-->"><!--[pnimg modname='Dizkus' src="icon_hideforums.gif"]--></button>
                    <button id="newshowforumlist" style="display: none;" title="<!--[gt text="Show forums"]-->"><!--[pnimg modname='Dizkus' src="icon_showforums.gif"]--></button>
                    <button id="newaddforum"      style="display: none;" title="<!--[gt text="Create new forum"]-->"><!--[pnimg modname='Dizkus' src="icon_addforum.gif" __alt="Create new forum" ]--></button>
                    <button id="newcanceladdcategory" title="<!--[gt text="Cancel"]-->"><!--[pnimg modname='Dizkus' src="icon_cancel.gif" __alt="Cancel" ]--></button>
                    <img id="newprogresscategoryimage" style="visibility: hidden;" src="<!--[$progressicon.src]-->" width="<!--[$progressicon.width]-->" height="<!--[$progressicon.height]-->" alt="<!--[gt text="Working. Please wait..."]-->" />
                </div>
            </div>
            <div id="neweditcategory" style="display: none; margin: 0 1em;">&nbsp;</div>
        </div>

        <ul id="newcid" class="dzk_treeforumlist" style="display: none; margin: 0.2em 0 0.2em 2em;">
            <li id="newemptycategory" style="display: none; border: 1px solid black; width: 90%; margin: 2px; padding: 2px; background-color: <!--[$bgcolor2|default:'transparent']-->;">
                <!--[gt text="This forum category does not yet contain any forums."]-->
            </li>

            <li id="newforum" style="display: none; border: 1px solid black; margin: 2px; padding: 2px; background-color: <!--[$bgcolor3|default:'transparent']-->;">
                <div style="height: 1.5em; padding: 2px; background-color: <!--[$bgcolor3|default:'transparent']-->;" class="dzk_handle z-clearfix">
                    <div id="newforumtitle" style="float: left; width: 60%;">
                        <!--[gt text="-- Create new forum --"]-->
                    </div>
                    <div style="float: right; width: 30%; text-align: right; padding-right: 1em;">
                        <button id="newhideforum" style="display: none;" title="<!--[gt text="Hide forum"]-->"><!--[pnimg modname='Dizkus' src="icon_hide.gif"]--></button>
                        <button id="newshowforum" style="display: none;" title="<!--[gt text="Show forum"]-->"><!--[pnimg modname='Dizkus' src="icon_show.gif"]--></button>
                        <button id="newcanceladdforum" title="<!--[gt text="Cancel"]-->"><!--[pnimg modname='Dizkus' src="icon_canceladdforum.gif" __alt="Cancel" ]--></button>
                        <img id="newprogressforumimage" style="visibility: hidden;" src="<!--[$progressicon.src]-->" width="<!--[$progressicon.width]-->" height="<!--[$progressicon.height]-->" alt="<!--[gt text="Working. Please wait..."]-->" />
                    </div>
                </div>
                <div id="neweditforum" style="display: none; margin: 0 1em; ">&nbsp;</div>
            </li>
        </ul>

    </li>
</ul>

<input type="hidden" id="authid" name="authid" value="<!--[insert name='generateauthkey' module='Dizkus']-->" />

<div class="z-clearfix" style="margin-top: 1em;">
    <button onclick="javascript:addcategory();" class="dzk_img add dzk_float_left"><!--[gt text="Create new forum category"]--></button>
    <button onclick="javascript:storetreeorder();" class="dzk_img ok dzk_float_right" type="submit"><!--[gt text="Save tree order"]--></button>
</div>

<script type="text/javascript">
    // <![CDATA[
    var storingnewsortorder = '<!--[gt text="Storing new sort order..."]-->';
    Event.observe(window, 'load', create_sortables, false);
    // ]]>
</script>

<!--[include file='dizkus_admin_footer.html']-->
