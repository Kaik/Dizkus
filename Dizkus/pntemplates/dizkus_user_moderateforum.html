<!--[*  $Id$  *]-->
<!--[ pnml name='_DZK_MODERATE' assign=templatetitle]-->
<!--[ pnpagesetvar name=title value=$templatetitle ]-->
<!--[ include file='dizkus_user_header.html' ]-->
<!--[ cssversion assign=configclass ]-->

<h2><!--[ $templatetitle ]--></h2>

<!--[ forumimage name=firstnew_image assign=firstnew ]-->

<!--[* start of breadcrumbs *]-->
<ul id="dzk_breadcrumbs" class="linklist pn-clearfix">
    <li><strong><!--[ pnml name='_DZK_MODERATE' ]-->&nbsp;::&nbsp;</strong></li>
    <li><a title="<!--[ pnml name='_DZK_GOTOSTART' ]-->" href="<!--[ pnmodurl modname=Dizkus type=user func=main ]-->"><strong><!--[ pnml name='_DZK_START' ]--></strong></a><strong><!--[ pnml name='_DZK_SEPARATOR' html=1 ]--></strong></li>
    <li><a title="<!--[ pnml name='_DZK_GOTO_CAT' ]--> <!--[ $forum.cat_title ]-->" href="<!--[ pnmodurl modname=Dizkus type=user func=main viewcat=$forum.cat_id ]-->"><strong><!--[ $forum.cat_title ]--></strong></a><strong><!--[ pnml name='_DZK_SEPARATOR' html=1 ]--></strong></li>
    <li><strong><!--[ $forum.forum_name|pnvarprepfordisplay ]--></strong></li>
</ul>
<!--[* end of breadcrumbs *]-->

<!--[ if $forum.forum_mods|@count > 0 ]-->
<ul id="dzk_moderatorlist" class="linklist pn-clearfix">
    <li><em><!--[ pnml name='_DZK_MODERATEDBY' ]-->&nbsp;:&nbsp;</em></li>
    <!--[ foreach name=moderators item=mod from=$forum.forum_mods ]-->
    <li><!--[$mod|userprofilelink]--><!--[if !$smarty.foreach.moderators.last]-->, <!--[/if]--></li>
    <!--[ /foreach ]-->
</ul>
<!--[ /if ]-->

<!--[ pnfpager total=$forum.forum_topics ]-->

<form class="<!--[ $configclass ]-->" method="post" action="<!--[ pnmodurl modname=Dizkus type=user func=moderateforum forum=$forum.forum_id ]-->">
    <table id="dzk_topiclist" class="pn-datatable" summary="<!--[ $forum.cat_title ]--> :: <!--[ $forum.forum_name ]-->">
        <colgroup>
            <col id="col_status"    />
            <col id="col_topic"     />
            <col id="col_replies"   />
            <col id="col_poster"    />
            <col id="col_views"     />
            <col id="col_lastpost"  />
            <col id="col_selection" />
        </colgroup>

        <thead>
            <tr>
                <th class="leftcell"><!--[ pnml name='_DZK_STATUS' ]--></th>
                <th class="midcell"><!--[ pnml name='_DZK_TOPIC' ]--></th>
                <th class="midcell"><!--[ pnml name='_DZK_REPLIES' ]--></th>
                <th class="midcell"><!--[ pnml name='_DZK_POSTER' ]--></th>
                <th class="midcell"><!--[ pnml name='_DZK_VIEWS' ]--></th>
                <th class="midcell"><!--[ pnml name='_DZK_DATE' ]--></th>
                <th class="rightcell"><!--[ pnml name='_DZK_SELECTED' ]--><input onclick="CheckAll('topic');" type="checkbox" id="alltopic"  value="" /></th>
            </tr>
        </thead>

        <tbody>
            <!--[ assign var="stickyControlStart" value="0" ]-->
            <!--[ assign var="stickyControlEnd" value="0" ]-->
            <!--[ foreach item=topic from=$forum.topics ]-->

            <!--[ if $topic.sticky eq 1 ]-->
            <!--[ if $stickystarted eq 0]-->
            <tr class="subheader <!--[cycle values="pn-odd,pn-even"]-->">
                <td headers="col_status col_topic col_replies col_poster col_views col_lastpost col_selection" colspan="7">
                    <!--[ pnml name='_DZK_STICKY' ]-->
                </td>
            </tr>
            <!--[ assign var="stickystarted" value="1" ]-->
            <!--[ /if ]-->
            <!--[ else ]-->
            <!--[ if $topicstarted eq 0]-->
            <tr class="subheader <!--[cycle values="pn-odd,pn-even"]-->">
                <td headers="col_status col_topic col_replies col_poster col_views col_lastpost col_selection" colspan="7">
                    <!--[ pnml name='_DZK_TOPIC' ]-->
                </td>
            </tr>
            <!--[ assign var="topicstarted" value="1" ]-->
            <!--[ /if ]-->
            <!--[ /if ]-->

            <tr id="topic<!--[ $topic.topic_id ]-->" class="topicrow <!--[cycle values="pn-odd,pn-even"]-->" >
                <td headers="col_status">
                    <!--[ if $topic.sticky eq 1 ]-->
                    <!--[ pnimg modname='Dizkus' src="icon_post_sticky.gif" alt="_DZK_STICKY" altml=true title="_DZK_STICKY" titleml=true]-->
                    <!--[ /if ]-->
                    <!--[ if $topic.topic_status eq 1 ]-->
                    <!--[ pnimg modname='Dizkus' src="icon_post_close.gif" alt="_DZK_ISLOCKED" altml=true title="_DZK_TOPICLOCKED" titleml=true ]-->
                    <!--[ /if ]-->
                    <!--[ if $topic.new_posts eq 1 ]-->
                    <!--[ pnimg modname='Dizkus' src="icon_redfolder.gif" alt="_DZK_NEWPOSTS" altml=true title="_DZK_NEWPOSTS" titleml=true ]-->
                    <!--[ else ]-->
                    <!--[ pnimg modname='Dizkus' src="icon_folder.gif" alt="_DZK_NORMALTOPIC" altml=true title="_DZK_NORMALTOPIC" titleml=true ]-->
                    <!--[ /if ]-->
                    <!--[ if $topic.hot_topic eq 1 ]-->
                    <!--[ pnimg modname='Dizkus' src="icon_hottopic.gif" alt="_DZK_HOTTOPIC" altml=true title="_DZK_HOTTOPIC" titleml=true ]-->
                    <!--[ /if ]-->
                </td>
                <td headers="col_topic">
                    <!--[ $topic.topic_id|viewtopiclink:$topic.topic_title:$forum.forum_name ]-->
                    <!--[ pnfpager objectid=$topic.topic_id total=$topic.total_posts add_prevnext=false separator=", " linkall=true force="viewtopic" ]-->
                </td>
                <td headers="col_replies" align="center"><!--[ $topic.topic_replies ]--></td>
                <td headers="col_poster" align="center"><!--[ $topic.pn_uname|userprofilelink ]--></td>
                <td headers="col_views" align="center"><!--[ $topic.topic_views ]--></td>
                <td headers="col_lastpost" align="center"><!--[ $topic.post_time_unix|pnfdate_format:'datetimebrief':'':true ]--><br /><!--[ $topic.last_poster|userprofilelink ]-->&nbsp;<a title="<!--[ pnml name='_DZK_GOTO_LATEST' ]-->" href="<!--[ $topic.last_post_url_anchor|pnvarprepfordisplay ]-->"><!--[ pnimg modname='Dizkus' src="icon_topic_latest.gif" alt="_DZK_GOTO_LATEST" altml=true ]--></a>&nbsp;</td>
                <td headers="col_selection" align="center"><input type="checkbox" onclick="CheckCheckAll('topic');" class="topic_checkbox" name="topic_id[]" value="<!--[$topic.topic_id]-->" /></td>
            </tr>

            <!--[ foreachelse ]-->
            <tr class="<!--[cycle values="pn-odd,pn-even"]-->">
                <td headers="col_status col_topic col_replies col_poster col_views col_lastpost col_action" colspan="7" align="center"><!--[ pnml name='_DZK_NOTOPICS' ]--></td>
            </tr>
            <!--[ /foreach ]-->
        </tbody>
    </table>

    <!--[ pnfpager total=$forum.forum_topics ]-->

    <div class="pn-warningmsg"><!--[ pnml name="_DZK_SUBMIT_HINT" ]--></div>

    <fieldset>
        <legend><!--[ pnml name='_DZK_MODERATORSOPTIONS' ]--></legend>
        <div class="<!--[ $configclass ]-->row">
            <label for="mode"><!--[ pnml name="_DZK_ACTIONS"]-->:</label>
            <select name="mode" id="mode" size="1">
                <option value="">&lt;&lt; <!--[ pnml name='_DZK_SELECTACTION' ]--> &gt;&gt;</option>
                <option value="sticky"><!--[ pnml name='_DZK_STICKYTOPICS' ]--></option>
                <option value="unsticky"><!--[ pnml name='_DZK_UNSTICKYTOPICS' ]--></option>
                <option value="lock"><!--[ pnml name='_DZK_LOCKTOPICS' ]--></option>
                <option value="unlock"><!--[ pnml name='_DZK_UNLOCKTOPICS' ]--></option>
                <option value="delete"><!--[ pnml name='_DZK_DELETETOPICS' ]--></option>
                <option value="move"><!--[ pnml name='_DZK_MOVETOPICS' ]--></option>
                <option value="join"><!--[ pnml name='_DZK_JOINTOPICS' ]--></option>
            </select>
        </div>
        <div class="<!--[ $configclass ]-->row">
            <label for="moveto"><!--[ pnml name='_DZK_MODERATE_MOVETOPICS_HINT' ]-->:</label>
            <select name="moveto" id="moveto">
                <option value=''>&lt;&lt; <!--[ pnml name='_DZK_SELECTTARGETFORUM' ]--> &gt;&gt;</option>
                <!--[ foreach item=singleforum from=$forums ]-->
                <option value="<!--[ $singleforum.forum_id ]-->"><!--[ $singleforum.cat_title ]-->&nbsp;::&nbsp;<!--[ $singleforum.forum_name ]--></option>
                <!--[ /foreach ]-->
            </select>
        </div>
        <div class="<!--[ $configclass ]-->row">
            <label for="createshadowtopic"><!--[ pnml name='_DZK_CREATESHADOWTOPIC' html=1 ]-->:</label>
            <input type="checkbox" name="createshadowtopic" id="createshadowtopic" value="1" />
        </div>
        <div class="<!--[ $configclass ]-->row">
            <label for="jointotopic"><!--[ pnml name='_DZK_MODERATE_JOINTOPICS_HINT' ]-->:</label>
            <span id="jointotopic">
                <select name="jointo_select" onchange="$('jointo').value=this.options[this.selectedIndex].value">
                    <option value=''>&lt;&lt; <!--[ pnml name='_DZK_SELECTTARGETTOPIC' ]--> &gt;&gt;</option>
                    <!--[ foreach item=topic from=$forum.topics ]-->
                    <option value="<!--[ $topic.topic_id ]-->"><!--[ $topic.topic_title|pnvarprepfordisplay ]--></option>
                    <!--[ /foreach ]-->
                </select>
                <!--[ pnml name='_DZK_OR' ]-->&nbsp;<!--[ pnml name='_DZK_JOINTOPICS_TOTOPIC' ]-->&nbsp;#
                <input type="text" name="jointo" id="jointo" value="" size="5" maxlength="10" />
            </span>
        </div>
    </fieldset>
    <div class="<!--[ $configclass ]-->buttons">
        <!--[* FOR Creating shadow topic the authkey is needed *]-->
        <input type="hidden" name="authid" value="<!--[ insert name='generateauthkey' module='Dizkus' ]-->" />
        <button class="dzk_img ok" name="submit" type="submit" value="submit" title="<!--[ pnml name='_DZK_SUBMIT' ]-->"><!--[ pnml name='_DZK_SUBMIT' ]--></button>
        <button class="dzk_img cancel" name="reset" type="reset" value="reset" title="<!--[ pnml name='_DZK_CANCEL' ]-->"><!--[ pnml name="_DZK_CANCEL" ]--></button>
    </div>
</form>

<!--[ include file='dizkus_user_footer.html' ]-->
